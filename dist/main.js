!function(){"use strict";!function(){var t=class{static humanWdith=65;static trashWidth=20;constructor(t,e,s){this.pos=t,this.speed=e,this.game=s}move(){this.pos=[this.pos[0]-this.speed,this.pos[1]]}getCenter(t){return this.pos[0]+Math.floor(t/2)}isCollidedWith(t,e,s){const i=this.pos[1],a=t.pos[1];if(Math.abs(i-a)<=20){const i=this.pos[0]+e>=t.pos[0],a=t.pos[0]+s>=this.pos[0];if(i&&a)return console.log("collision detected"),!0}return!1}},e=class{constructor(t){this.backgroundImage=new Image,this.imageLoaded=!1,this.backgroundImage.onload=()=>{this.imageLoaded=!0},this.backgroundImage.src="./images/newbg.png"}drawFrame(t){this.imageLoaded&&t.drawImage(this.backgroundImage,0,0)}};async function s(){try{const t=await fetch("https://random-word-api.vercel.app/api?words=1");if(t.ok)return(await t.json())[0];throw t}catch(t){console.error(t)}}class i extends t{static IMAGE="./images/walkcyclevarious.png";static start=[680,650,590];static frame=9;static spriteHeight=60;static spriteWidth=65;async setRandomWord(){let t;t=await s(),this.word=t,this.score=100*this.word.length}constructor(t,e,s,a){super([t,e],s,a),this.targeted=!1,this.status="alive",this.setRandomWord(),this.sprite=new Image,this.maxFrame=11,this.minFrame=9,this.width=65,this.height=60,this.centerX=this.pos[0]+i.spriteWidth/2,this.centerY=this.pos[1]+i.spriteHeight/2,this.person=Math.floor(7*Math.random())+1,this.spriteHeight=i.spriteHeight*this.person,this.frame=i.frame,this.imageLoaded=!1,this.sprite.onload=()=>{this.imageLoaded=!0},this.sprite.src=i.IMAGE}getCenterX(){return this.pos[0]+32.5}getCenterY(){return this.pos[1]+30}drawFrame(t){let[e,s]=this.pos,a=this.person,n=this.frame;this.imageLoaded&&(t.drawImage(this.sprite,i.spriteWidth*n,i.spriteHeight*a,i.spriteWidth,i.spriteHeight,e,s,70,70),this.drawWord(t))}drawWord(t){t.fillStyle="white",t.font="20px arial",t.fillText(this.word,this.pos[0],this.pos[1]+5)}update(){this.frame<this.maxFrame?this.frame++:this.frame=this.minFrame}move(){let[t,e]=this.pos;t>100&&(this.pos=[this.pos[0]-this.speed,this.pos[1]])}wordCheck(t){t===this.word[0]&&(this.word=this.word.slice(1)),this.word.length||(this.status="dead",console.log(this))}}var a=i;class n extends t{static spriteWidth=20;static spriteHeight=20;static url="./images/littered_dungeon.png";static frames=[[3,4],[30,4],[60,4],[90,2]];static dimensions=[[20,20],[20,20],[20,20],[30,30]];constructor(t,e){super([150,t+20],20,e),this.randomIndex=Math.floor(4*Math.random()),this.width=n.dimensions[this.randomIndex][0],this.height=n.dimensions[this.randomIndex][1],this.trash=new Image,this.imageLoaded=!1,this.trash.onload=()=>{this.imageLoaded=!0},this.trash.src=n.url,this.number=Math.floor(3*Math.random())+1}getCenterX(){return this.pos[0]+10}getCenterY(){return this.pos[1]+10}update(){this.rotation+=this.rotationSpped}drawFrame(t){let[e,s]=[n.frames[this.randomIndex][0],n.frames[this.randomIndex][1]],[i,a]=[n.dimensions[this.randomIndex][0],n.dimensions[this.randomIndex][1]];this.imageLoaded&&t.drawImage(this.trash,e,s,i,a,this.pos[0],this.pos[1],i,a)}move(){this.pos=[this.pos[0]+40,this.pos[1]]}}var h=n;class r{static url="./images/zombie.png";static throwingAnimation=[3,63,130,205,352,407,460,63];static throwingDimensions=[[50,70],[50,70],[50,70],[50,70],[50,70],[50,70],[68,70],[50,70]];static idleDimensions=[[47,70],[47,70],[47,70],[44,70],[44,70],[44,70]];static idleAnimation=[3,53,102,150,196,243];static idleCol=163;static throwingCol=320;static idleRow=[229];constructor(t,e){this.standingIndex=0,this.x=100,this.y=t,this.game=e,this.sprite=new Image,this.imageLoaded=!1,this.sprite.onload=()=>{this.imageLoaded=!0},this.sprite.src=r.url,this.idleAnimation=[1,2,3,4,5,6],this.targets=[],this.killed=[],this.projectile=!1,this.projectileThrown=!1}drawFrame(t){this.targets.every((t=>!0===t.targeted))||0===this.targets.length?this.drawIdleFrame(t):this.targets.some((t=>!1===t.targeted))?this.drawThrowingFrame(t):this.drawIdleFrame(t)}throwProjectile(){if(this.targets.length>0){const t=this.targets.shift();if(this.killed.push(t),this.targets.shift(),!t.targeted){const e=new h(this.y,this.game);this.game.add(e),t.targeted=!0}}}drawThrowingFrame(t){let[e,s]=[r.throwingDimensions[this.standingIndex][0],r.throwingDimensions[this.standingIndex][1]],[i,a]=[r.throwingAnimation[this.standingIndex],r.throwingCol];this.imageLoaded&&(this.standingIndex++,t.drawImage(this.sprite,i,a,e,s,this.x,this.y,e,s),this.standingIndex>7&&(this.throwProjectile(),this.standingIndex=0))}drawIdleFrame(t){let[e,s]=[r.idleDimensions[this.standingIndex][0],r.idleDimensions[this.standingIndex][1]],[i,a]=[r.idleAnimation[this.standingIndex],r.idleCol];this.imageLoaded&&(this.standingIndex++,t.drawImage(this.sprite,i,a,e,s,this.x,this.y,e,s),this.standingIndex>5&&(this.standingIndex=0))}}var o=r;class d{static DIM_X=1500;static DIM_Y=900;constructor(){this.humanSpawnTime=2e3,this.numberOfHumans=0,this.humansKilled=0,this.humanSpeed=5,this.score=0,this.humans=[],this.zombies=[],this.setting=[],this.humanTargets=[],this.addSetting(),this.addZombies(),this.trash=[],this.active=!1,this.time=0,this.gameOver=!1,document.addEventListener("keydown",(t=>{this.checkLetter(t.key)}))}add(t){if(t instanceof a)this.humans.push(t);else{if(!(t instanceof h))throw new Error("unknown type of object");this.trash.push(t)}}addZombies(){let t=new o(575,this),e=new o(640,this),s=new o(700,this);this.zombies.push(t),this.zombies.push(e),this.zombies.push(s)}addHuman(){console.log("called");const t=[590,710,650];let e=setInterval((()=>{console.log(this.humanSpawnTime),console.log("spawntimechange"),this.gameOver&&clearInterval(e),this.humanSpawnTime>=100&&(this.humanSpawnTime-=500)}),2e3),s=setInterval((()=>{this.gameOver&&clearInterval(s),console.log("speed change"),console.log(this.humanSpeed),this.humanSpeed<=15&&(this.humanSpeed+=.5)}),3e3),i=setInterval((()=>{this.gameOver&&clearInterval(i);let e=Math.floor(301*Math.random())+1400;this.numberOfHumans||(this.add(new a(e,590,this.humanSpeed,this)),this.numberOfHumans+=1),this.numberOfHumans+=1;let s=this.numberOfHumans%3;this.add(new a(e,t[s],this.humanSpeed,this))}),this.humanSpawnTime)}addSetting(){this.setting.push(new e)}moveObjects(){this.humans.concat(this.trash).forEach((t=>{t.move()})),this.humans.some((t=>t.pos[0]<=150))&&(this.gameOver=!0)}allObjects(){return[].concat(this.setting,this.humans)}draw(t){t.clearRect(0,0,d.DIM_X,d.DIM_Y),this.setting[0].drawFrame(t),this.humans.forEach((e=>{e.drawFrame(t)})),this.zombies.forEach((e=>{e.drawFrame(t)})),this.trash.forEach((e=>{e.drawFrame(t)}))}checkLetter(t){this.humans.filter((t=>t.pos[0]<1500)).forEach((e=>{e.wordCheck(t)}))}triggerThrow(){}checkForLoss(){this.humans.some((t=>t.pos[0]<150))}update(){this.humans.forEach((t=>{t.update()})),this.checkforDeadHumans(),this.assignHumans(),this.checkHits(),this.gameOver}checkforDeadHumans(){this.humans.forEach((t=>{"dead"===t.status&&this.humanTargets.push(t)}))}assignHumans(){for(let t=0;t<this.humanTargets.length;t++){let e=this.humanTargets[t],s=this.humanTargets[t].pos[1];switch(!0){case s-10==700:this.zombies[2].targets.includes(e)||this.zombies[2].killed.includes(e)||(this.zombies[2].targets.push(e),this.zombies[2].projectile=!0);break;case s-20==630:this.zombies[1].targets.includes(e)||this.zombies[1].killed.includes(e)||(this.zombies[1].targets.push(e),this.zombies[1].projectile=!0);break;case s-15==575:this.zombies[0].targets.includes(e)||this.zombies[0].killed.includes(e)||(this.zombies[0].targets.push(e),this.zombies[0].projectile=!0)}}}checkHits(){for(let t=0;t<this.trash.length;t++)for(let e=0;e<this.humans.length;e++){const s=this.trash[t],i=this.humans[e];s&&i&&s.isCollidedWith(i,20,65)&&i.pos[0]<1500&&"dead"===i.status&&(this.remove(s),this.remove(i))}}remove(t){if(console.log("removal in process"),t instanceof h)this.trash.splice(this.trash.indexOf(t),1);else{if(!(t instanceof a))throw new Error("unknown type of object");this.humans.splice(this.humans.indexOf(t),1),this.score+=t.score,this.humansKilled+=1}}getSetting(){return this.setting[0]}restartObjects(){this.humanSpawnTime=2e3,this.humanSpeed=5,this.score=0,this.humansKilled=0,this.humanSpeed=2,this.numberOfHumans=0,this.gameOver=!1,this.humans=[],this.trash=[],this.zombies=[],this.addZombies()}}var m=d;class l{static alphabet=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];constructor(t,e,s){this.canvas=s,this.ctx=e,this.game=t,this.lastFrameTime=0,this.frameRate=10,this.frameDelay=1e3/this.frameRate,this.score=document.getElementById("score"),this.humansKilled=document.getElementById("humansKilled"),this.index=0,this.menuImage=new Image,this.imageLoaded=!1,this.menuImage.onload=()=>{this.imageLoaded=!0,this.startMenu()},this.menuImage.src="./images/newbg.png",this.typingindex=0,this.againIndex=0,this.returnIndex=0,this.yesIndex=0,this.noIndex=0,this.yes=["y","e","s"],this.no=["n","o"],document.addEventListener("keydown",(t=>{console.log(t.key);let e=document.getElementsByClassName("startLetters");for(let s=this.typingindex;s<e.length;s++){if(e[s].innerText===t.key){e[s].classList.add("typed"),this.typingindex++;break}this.typingindex=0;for(let t=0;t<e.length;t++)e[t].classList.remove("typed")}if(this.game.gameOver){let e=document.getElementsByClassName("againLetters"),s=document.getElementsByClassName("returnLetters");switch(this.yesIndex){case 0:0===this.yes.indexOf(t.key)&&(e[this.yesIndex].classList.add("typed"),this.yesIndex+=1);break;case 1:1===this.yes.indexOf(t.key)&&(e[this.yesIndex].classList.add("typed"),this.yesIndex+=1);break;case 2:this.yesIndex=0,2===this.yes.indexOf(t.key)&&(e[2].classList.add("typed"),setTimeout((()=>this.restart()),3e3))}switch(this.noIndex){case 0:0===this.no.indexOf(t.key)&&(s[this.noIndex].classList.add("typed"),this.noIndex+=1);break;case 1:console.log(t.key===this.no[1]),this.noIndex=0,1===this.no.indexOf(t.key)&&(s[1].classList.add("typed"),this.returnToMenu())}}let s=document.getElementsByClassName("typed");5===s.length&&"s"===s[0].innerText&&(setTimeout((()=>this.start()),1e3),this.typingindex=0)}))}clearTyped(t){let e=document.getElementsByClassName(t);for(let t=0;t<e.length;t++)e[t].classList.remove("typed")}startMenu(){this.ctx.clearRect(0,0,1500,900),this.ctx.drawImage(this.menuImage,0,0)}returnToMenu(){window.location.reload()}modeSelection(){this.menuKeys=[],document.getElementById("navBar").style.display="none",document.getElementById("modeSelection").style.display="block",document.addEventListener("keydown",(t=>{"Backspace"===t.key?this.menuKeys.pop():l.alphabet.includes(t.key.toUpperCase())&&this.menuKeys.push(t.key.toLowerCase());let e=document.getElementsByClassName("sLetters"),s=document.getElementsByClassName("aLetters");for(let t=0;t<this.menuKeys.length;t++)this.menuKeys[t]===e[t].innerText?e[t].classList.add("typed"):e[t].classList.remove("typed"),this.menuKeys[t]===s[t].innerText?s[t].classList.add("typed"):s[t].classList.remove("typed");let i=document.getElementsByClassName("typed");6===i.length?console.log(arcade):8===i.length&&console.log(survival)}))}start(){let t=document.getElementById("navBar"),e=document.getElementById("myTitle");t.style.display="none",e.style.display="none",this.score.style.display="block",this.humansKilled.style.display="block",this.game.addHuman(),requestAnimationFrame(this.animate.bind(this))}over(){this.clearTyped("againLetters"),this.clearTyped("returnLetters"),this.clearTyped("startLetters");let t=document.getElementById("tryAgain"),e=document.getElementById("yes"),s=document.getElementById("no");this.ctx.clearRect(0,0,1500,900),this.ctx.drawImage(this.menuImage,0,0),t.style.display="block",e.style.display="block",s.style.display="block"}animate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.game.gameOver?this.over():(t-this.lastFrameTime>this.frameDelay&&(this.lastFrameTime=t,this.game.moveObjects(),this.game.update(),this.game.draw(this.ctx),this.score.innerText=`Score: ${this.game.score}`,this.humansKilled.innerText=`Kills: ${this.game.humansKilled}`),requestAnimationFrame(this.animate.bind(this)))}restart(){this.clearTyped("againLetters"),this.clearTyped("returnLetters"),this.clearTyped("startLetters"),console.log("restarted"),this.lastFrameTime=0,this.game.restartObjects(),console.log(this.game);let t=document.getElementById("tryAgain"),e=document.getElementById("yes"),s=document.getElementById("no");t.style.display="none",e.style.display="none",s.style.display="none",this.start()}}var c=l;window.Human=a,window.MovingObject=t,window.Setting=e,window.Word=class{async wordCheck(){let t;do{t=await s()}while(t.length>10);return t}constructor(){this.wordCheck().then((t=>{this.word=t}))}getWord(){return this.word}},document.addEventListener("DOMContentLoaded",(()=>{let t=document.getElementById("game");const e=t.getContext("2d");t.width=1400,t.height=900;const s=new m;console.log(s.setting.backgroundImage),new c(s,e,t)}))}()}();
//# sourceMappingURL=main.js.map