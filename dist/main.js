!function(){"use strict";!function(){var e=class{static humanWdith=65;static trashWidth=20;constructor(e,t,s){this.pos=e,this.speed=t,this.game=s}move(){this.pos=[this.pos[0]-this.speed,this.pos[1]]}getCenter(e){return this.pos[0]+Math.floor(e/2)}isCollidedWith(e,t,s){const i=this.pos[1],a=e.pos[1];if(Math.abs(i-a)<=20){const i=this.pos[0]+t>=e.pos[0],a=e.pos[0]+s>=this.pos[0];if(i&&a)return console.log("collision detected"),!0}return!1}},t=class{constructor(e){this.backgroundImage=new Image,this.imageLoaded=!1,this.backgroundImage.onload=()=>{this.imageLoaded=!0},this.backgroundImage.src="./images/newbg.png"}drawFrame(e){this.imageLoaded&&e.drawImage(this.backgroundImage,0,0)}};async function s(){try{const e=await fetch("https://random-word-api.vercel.app/api?words=1");if(e.ok)return(await e.json())[0];throw e}catch(e){console.error(e)}}class i extends e{static IMAGE="./images/walkcyclevarious.png";static start=[680,650,590];static frame=9;static spriteHeight=60;static spriteWidth=65;async setRandomWord(){let e;e=await s(),this.word=e,this.score=100*this.word.length}constructor(e,t,s,a){super([e,t],s,a),this.targeted=!1,this.status="alive",this.setRandomWord(),this.sprite=new Image,this.maxFrame=11,this.minFrame=9,this.width=65,this.height=60,this.centerX=this.pos[0]+i.spriteWidth/2,this.centerY=this.pos[1]+i.spriteHeight/2,this.person=Math.floor(7*Math.random())+1,this.spriteHeight=i.spriteHeight*this.person,this.frame=i.frame,this.imageLoaded=!1,this.sprite.onload=()=>{this.imageLoaded=!0},this.sprite.src=i.IMAGE}getCenterX(){return this.pos[0]+32.5}getCenterY(){return this.pos[1]+30}drawFrame(e){let[t,s]=this.pos,a=this.person,h=this.frame;this.imageLoaded&&(e.drawImage(this.sprite,i.spriteWidth*h,i.spriteHeight*a,i.spriteWidth,i.spriteHeight,t,s,70,70),this.drawWord(e))}drawWord(e){e.fillStyle="white",e.font="20px arial",e.fillText(this.word,this.pos[0],this.pos[1]+5)}update(){this.frame<this.maxFrame?this.frame++:this.frame=this.minFrame}move(){let[e,t]=this.pos;e>100&&(this.pos=[this.pos[0]-this.speed,this.pos[1]])}wordCheck(e){e===this.word[0]&&(this.word=this.word.slice(1)),this.word.length||(this.status="dead",console.log(this))}}var a=i;class h extends e{static spriteWidth=20;static spriteHeight=20;static url="./images/littered_dungeon.png";static frames=[[3,4],[30,4],[60,4],[90,2]];static dimensions=[[20,20],[20,20],[20,20],[30,30]];constructor(e,t){super([150,e+20],20,t),this.randomIndex=Math.floor(4*Math.random()),this.width=h.dimensions[this.randomIndex][0],this.height=h.dimensions[this.randomIndex][1],this.trash=new Image,this.imageLoaded=!1,this.trash.onload=()=>{this.imageLoaded=!0},this.trash.src=h.url,this.number=Math.floor(3*Math.random())+1}getCenterX(){return this.pos[0]+10}getCenterY(){return this.pos[1]+10}update(){this.rotation+=this.rotationSpped}drawFrame(e){let[t,s]=[h.frames[this.randomIndex][0],h.frames[this.randomIndex][1]],[i,a]=[h.dimensions[this.randomIndex][0],h.dimensions[this.randomIndex][1]];this.imageLoaded&&e.drawImage(this.trash,t,s,i,a,this.pos[0],this.pos[1],i,a)}move(){this.pos=[this.pos[0]+40,this.pos[1]]}}var n=h;class r{static url="./images/zombie.png";static throwingAnimation=[3,63,130,205,352,407,460,63];static throwingDimensions=[[50,70],[50,70],[50,70],[50,70],[50,70],[50,70],[68,70],[50,70]];static idleDimensions=[[47,70],[47,70],[47,70],[44,70],[44,70],[44,70]];static idleAnimation=[3,53,102,150,196,243];static idleCol=163;static throwingCol=320;static idleRow=[229];constructor(e,t){this.standingIndex=0,this.x=100,this.y=e,this.game=t,this.sprite=new Image,this.imageLoaded=!1,this.sprite.onload=()=>{this.imageLoaded=!0},this.sprite.src=r.url,this.idleAnimation=[1,2,3,4,5,6],this.targets=[],this.killed=[],this.projectile=!1,this.projectileThrown=!1}drawFrame(e){this.targets.every((e=>!0===e.targeted))||0===this.targets.length?this.drawIdleFrame(e):this.targets.some((e=>!1===e.targeted))?this.drawThrowingFrame(e):this.drawIdleFrame(e)}throwProjectile(){if(this.targets.length>0){const e=this.targets.shift();if(this.killed.push(e),this.targets.shift(),!e.targeted){const t=new n(this.y,this.game);this.game.add(t),e.targeted=!0}}}drawThrowingFrame(e){let[t,s]=[r.throwingDimensions[this.standingIndex][0],r.throwingDimensions[this.standingIndex][1]],[i,a]=[r.throwingAnimation[this.standingIndex],r.throwingCol];this.imageLoaded&&(this.standingIndex++,e.drawImage(this.sprite,i,a,t,s,this.x,this.y,t,s),this.standingIndex>7&&(this.throwProjectile(),this.standingIndex=0))}drawIdleFrame(e){let[t,s]=[r.idleDimensions[this.standingIndex][0],r.idleDimensions[this.standingIndex][1]],[i,a]=[r.idleAnimation[this.standingIndex],r.idleCol];this.imageLoaded&&(this.standingIndex++,e.drawImage(this.sprite,i,a,t,s,this.x,this.y,t,s),this.standingIndex>5&&(this.standingIndex=0))}}var o=r;class d{static DIM_X=1500;static DIM_Y=900;constructor(){this.humanSpawnTime=2e3,this.numberOfHumans=0,this.humansKilled=0,this.humanSpeed=5,this.score=0,this.humans=[],this.zombies=[],this.setting=[],this.humanTargets=[],this.addSetting(),this.addZombies(),this.trash=[],this.active=!1,this.time=0,this.gameOver=!1,document.addEventListener("keydown",(e=>{this.checkLetter(e.key)}))}add(e){if(e instanceof a)this.humans.push(e);else{if(!(e instanceof n))throw new Error("unknown type of object");this.trash.push(e)}}addZombies(){let e=new o(575,this),t=new o(640,this),s=new o(700,this);this.zombies.push(e),this.zombies.push(t),this.zombies.push(s)}addHuman(){console.log("called");const e=[590,710,650];let t=setInterval((()=>{console.log(this.humanSpawnTime),console.log("spawntimechange"),this.gameOver&&clearInterval(t),this.humanSpawnTime>=1e3&&(this.humanSpawnTime-=500)}),5e3),s=setInterval((()=>{this.gameOver&&clearInterval(s),console.log("speed change"),console.log(this.humanSpeed),this.humanSpeed<=15&&(this.humanSpeed+=.5)}),5e3),i=setInterval((()=>{this.gameOver&&clearInterval(i);let t=Math.floor(301*Math.random())+1400;this.numberOfHumans||(this.add(new a(t,590,this.humanSpeed,this)),this.numberOfHumans+=1),this.numberOfHumans+=1;let s=this.numberOfHumans%3;this.add(new a(t,e[s],this.humanSpeed,this))}),this.humanSpawnTime)}addSetting(){this.setting.push(new t)}moveObjects(){this.humans.concat(this.trash).forEach((e=>{e.move()})),this.humans.some((e=>e.pos[0]<=150))&&(this.gameOver=!0)}allObjects(){return[].concat(this.setting,this.humans)}draw(e){e.clearRect(0,0,d.DIM_X,d.DIM_Y),this.setting[0].drawFrame(e),this.humans.forEach((t=>{t.drawFrame(e)})),this.zombies.forEach((t=>{t.drawFrame(e)})),this.trash.forEach((t=>{t.drawFrame(e)}))}checkLetter(e){this.humans.filter((e=>e.pos[0]<1500)).forEach((t=>{t.wordCheck(e)}))}triggerThrow(){}checkForLoss(){this.humans.some((e=>e.pos[0]<150))}update(){this.humans.forEach((e=>{e.update()})),this.checkforDeadHumans(),this.assignHumans(),this.checkHits(),this.gameOver}checkforDeadHumans(){this.humans.forEach((e=>{"dead"===e.status&&this.humanTargets.push(e)}))}assignHumans(){for(let e=0;e<this.humanTargets.length;e++){let t=this.humanTargets[e],s=this.humanTargets[e].pos[1];switch(!0){case s-10==700:this.zombies[2].targets.includes(t)||this.zombies[2].killed.includes(t)||(this.zombies[2].targets.push(t),this.zombies[2].projectile=!0);break;case s-20==630:this.zombies[1].targets.includes(t)||this.zombies[1].killed.includes(t)||(this.zombies[1].targets.push(t),this.zombies[1].projectile=!0);break;case s-15==575:this.zombies[0].targets.includes(t)||this.zombies[0].killed.includes(t)||(this.zombies[0].targets.push(t),this.zombies[0].projectile=!0)}}}checkHits(){for(let e=0;e<this.trash.length;e++)for(let t=0;t<this.humans.length;t++){const s=this.trash[e],i=this.humans[t];s&&i&&s.isCollidedWith(i,20,65)&&i.pos[0]<1500&&"dead"===i.status&&(this.remove(s),this.remove(i))}}remove(e){if(console.log("removal in process"),e instanceof n)this.trash.splice(this.trash.indexOf(e),1);else{if(!(e instanceof a))throw new Error("unknown type of object");this.humans.splice(this.humans.indexOf(e),1),this.score+=e.score,this.humansKilled+=1}}getSetting(){return this.setting[0]}restartObjects(){this.humanSpawnTime=2e3,this.humanSpeed=5,this.score=0,this.humansKilled=0,this.humanSpeed=2,this.numberOfHumans=0,this.gameOver=!1,this.humans=[],this.trash=[],this.zombies=[],this.addZombies(),this.addHuman()}}var m=d;class l{static alphabet=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];constructor(e,t,s){this.canvas=s,this.ctx=t,this.game=e,this.lastFrameTime=0,this.frameRate=10,this.frameDelay=1e3/this.frameRate,this.score=document.getElementById("score"),this.humansKilled=document.getElementById("humansKilled"),this.index=0,this.menuImage=new Image,this.imageLoaded=!1,this.menuImage.onload=()=>{this.imageLoaded=!0,this.startMenu()},this.menuImage.src="./images/newbg.png",this.typingindex=0,this.againIndex=0,this.returnIndex=0,this.yesIndex=0,this.noIndex=0,this.yes=["y","e","s"],this.no=["n","o"],document.addEventListener("keydown",(e=>{console.log(e.key);let t=document.getElementsByClassName("startLetters");for(let s=this.typingindex;s<t.length;s++){if(t[s].innerText===e.key){t[s].classList.add("typed"),this.typingindex++;break}this.typingindex=0;for(let e=0;e<t.length;e++)t[e].classList.remove("typed")}if(this.game.gameOver){let t=document.getElementsByClassName("againLetters"),s=document.getElementsByClassName("returnLetters");switch(this.yesIndex){case 0:0===this.yes.indexOf(e.key)&&(t[this.yesIndex].classList.add("typed"),this.yesIndex+=1);break;case 1:1===this.yes.indexOf(e.key)&&(t[this.yesIndex].classList.add("typed"),this.yesIndex+=1);break;case 2:this.yesIndex=0,2===this.yes.indexOf(e.key)&&(t[2].classList.add("typed"),setTimeout((()=>this.restart()),3e3))}switch(this.noIndex){case 0:0===this.no.indexOf(e.key)&&(s[this.noIndex].classList.add("typed"),this.noIndex+=1);break;case 1:console.log(e.key===this.no[1]),this.noIndex=0,1===this.no.indexOf(e.key)&&(s[1].classList.add("typed"),this.returnToMenu())}}let s=document.getElementsByClassName("typed");5===s.length&&"s"===s[0].innerText&&(setTimeout((()=>this.start()),1e3),this.typingindex=0)}))}clearTyped(e){let t=document.getElementsByClassName(e);for(let e=0;e<t.length;e++)t[e].classList.remove("typed")}startMenu(){this.ctx.clearRect(0,0,1500,900),this.ctx.drawImage(this.menuImage,0,0)}returnToMenu(){window.location.reload()}modeSelection(){this.menuKeys=[],document.getElementById("navBar").style.display="none",document.getElementById("modeSelection").style.display="block",document.addEventListener("keydown",(e=>{"Backspace"===e.key?this.menuKeys.pop():l.alphabet.includes(e.key.toUpperCase())&&this.menuKeys.push(e.key.toLowerCase());let t=document.getElementsByClassName("sLetters"),s=document.getElementsByClassName("aLetters");for(let e=0;e<this.menuKeys.length;e++)this.menuKeys[e]===t[e].innerText?t[e].classList.add("typed"):t[e].classList.remove("typed"),this.menuKeys[e]===s[e].innerText?s[e].classList.add("typed"):s[e].classList.remove("typed");let i=document.getElementsByClassName("typed");6===i.length?console.log(arcade):8===i.length&&console.log(survival)}))}start(){let e=document.getElementById("navBar"),t=document.getElementById("myTitle");e.style.display="none",t.style.display="none",this.score.style.display="block",this.humansKilled.style.display="block",this.game.addHuman(),requestAnimationFrame(this.animate.bind(this))}over(){this.clearTyped("againLetters"),this.clearTyped("returnLetters"),this.clearTyped("startLetters");let e=document.getElementById("tryAgain"),t=document.getElementById("yes"),s=document.getElementById("no");this.ctx.clearRect(0,0,1500,900),this.ctx.drawImage(this.menuImage,0,0),e.style.display="block",t.style.display="block",s.style.display="block"}animate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.game.gameOver?this.over():(e-this.lastFrameTime>this.frameDelay&&(this.lastFrameTime=e,this.game.moveObjects(),this.game.update(),this.game.draw(this.ctx),this.score.innerText=`Score: ${this.game.score}`,this.humansKilled.innerText=`Kills: ${this.game.humansKilled}`),requestAnimationFrame(this.animate.bind(this)))}restart(){this.clearTyped("againLetters"),this.clearTyped("returnLetters"),this.clearTyped("startLetters"),console.log("restarted"),this.lastFrameTime=0,this.game.restartObjects(),console.log(this.game);let e=document.getElementById("tryAgain"),t=document.getElementById("yes"),s=document.getElementById("no");e.style.display="none",t.style.display="none",s.style.display="none",this.start()}}var c=l;window.Human=a,window.MovingObject=e,window.Setting=t,window.Word=class{async wordCheck(){let e;do{e=await s()}while(e.length>10);return e}constructor(){this.wordCheck().then((e=>{this.word=e}))}getWord(){return this.word}},document.addEventListener("DOMContentLoaded",(()=>{let e=document.getElementById("game");const s=e.getContext("2d");new class{constructor(e){this.resourceCache={},this.loading=[],this.readyCallbacks=[],e.forEach((e=>{this.load(e)}))}load(e){this._load(e)}_load(e){if(this.resourceCache[e])return this.resourceCache[e];{this.loading.push(e);let t=new Image;t.onload=()=>{this.resourceCache[e]=t,this.isReady()&&this.readyCallbacks.forEach((e=>{e()}))},this.resourceCache[e]=!1,t.src=e}}get(e){return this.resourceCache[e]}isReady(){let e=!0;for(var t in this.resourceCache)this.resourceCache.hasOwnProperty.call(this.resourceCache,t)&&!this.resourceCache[t]&&(e=!1);return e}onReady(e){this.readyCallbacks.push(e)}}(["./images/bg.png","./images/grass_15.png","./images/house1.png","./images/walkcyclevarious.png","./images/wireframe.png"]),new t(s),e.width=1400,e.height=900;const i=new m;console.log(i.setting.backgroundImage),new c(i,s,e)}))}()}();
//# sourceMappingURL=main.js.map